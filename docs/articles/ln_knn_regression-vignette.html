<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ln.knn.regression-vignette • ln.knn.regression</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ln.knn.regression-vignette">
<meta property="og:description" content="ln.knn.regression">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ln.knn.regression</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ln_knn_regression-vignette.html">ln.knn.regression-vignette</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ln.knn.regression-vignette</h1>
            
      
      
      <div class="hidden name"><code>ln_knn_regression-vignette.Rmd</code></div>

    </div>

    
    
<p>This vignette contains examples and documentation on how the
ln.knn.regression functions can be used in real-life scenarios. The
package’s ultimate goal is to help those who are building either a
linear or KNN regression model decide what variables to use, and which
model is more appropriate.</p>
<p>When building a model, there are a few things that you must do:</p>
<ul>
<li>State the question you are trying to answer.</li>
<li>Perform summaries of the data for exploratory data analysis.</li>
<li>Create visualizations of the data for exploratory data analysis
.</li>
<li>Build the regression models.</li>
<li>Assess the models’ performances by calculating its accuracy.</li>
</ul>
<p>The ln.knn.regression package makes performing regression analysis
much easier for you:</p>
<ul>
<li>Consists of multiple functions that allows you to easily visualize
your data.</li>
<li>Contains a function that calculates summary statistics of your
data.</li>
<li>Builds linear and knn regression model and calculates their RMSPE
value.</li>
</ul>
<div class="section level2">
<h2 id="data-iris">Data: iris<a class="anchor" aria-label="anchor" href="#data-iris"></a>
</h2>
<p>To explore the package, we will be using the iris data set. This data
set contains 150 rows and 5 columns. To read the iris data set
documentation, you can check <code><a href="https://rdrr.io/r/datasets/iris.html" class="external-link">?iris</a></code></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ln.knn.regression</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 150   5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span><span class="co">#&gt; 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span><span class="co">#&gt; 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span><span class="co">#&gt; 3          4.7         3.2          1.3         0.2  setosa</span></span>
<span><span class="co">#&gt; 4          4.6         3.1          1.5         0.2  setosa</span></span>
<span><span class="co">#&gt; 5          5.0         3.6          1.4         0.2  setosa</span></span>
<span><span class="co">#&gt; 6          5.4         3.9          1.7         0.4  setosa</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<p>We can break down our functions into 3 different groups:</p>
<ul>
<li>Visualizations</li>
<li>Summary Statistics</li>
<li>Regression Models</li>
</ul>
<div class="section level3">
<h3 id="visualizations">Visualizations<a class="anchor" aria-label="anchor" href="#visualizations"></a>
</h3>
<div class="section level4">
<h4 id="create-bar-graphs-with-bar_graph">1. Create bar graphs with <code>bar_graph()</code><a class="anchor" aria-label="anchor" href="#create-bar-graphs-with-bar_graph"></a>
</h4>
<p><code><a href="../reference/bar_graph.html">bar_graph()</a></code> allows you to create a bar graph and checks
whether or not you are using the appropriate argument types. Bar graphs
are commonly used to visualize discrete variables and recognize trends
in the data.</p>
<p>The first argument is a data frame that contains the data that you
want to visualize. The second argument contains the discrete variable
that will be on the x-axis, and the third argument contains the
numerical variable that will be on the y-axis. The rest of the arguments
are strings that will be used to label your axis and graph.</p>
<p>For example, we can to view the sepal width distribution of different
types of species in the iris data set:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/bar_graph.html">bar_graph</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">iris</span><span class="op">$</span><span class="va">Species</span>, <span class="va">iris</span><span class="op">$</span><span class="va">Sepal.Length</span>, <span class="st">"Species"</span>, <span class="st">"Sepal Length"</span>, <span class="st">"Species"</span>, <span class="st">"Species vs Sepal Length Distribution"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ln_knn_regression-vignette_files/figure-html/example-bar-1.png" alt="Bar Graph for Iris Species Sepal Length" width="672"><p class="caption">
Bar Graph for Iris Species Sepal Length
</p>
</div>
</div>
<div class="section level4">
<h4 id="create-histogram-with-hist_plot">2. Create histogram with <code>hist_plot()</code><a class="anchor" aria-label="anchor" href="#create-histogram-with-hist_plot"></a>
</h4>
<p><code><a href="../reference/hist_plot.html">hist_plot()</a></code> allows you to create a histogram and checks
whether or not you are using the appropriate argument types. Contrary to
bar graphs, histograms are commonly used to visualize trends for
continuous variables. The x-axis is a number line of the x variable that
has been split into multiple groups, and the y-axis is the number of
times the value has appeared within that range.</p>
<p>The first argument is a data frame that contains the data that you
want to visualize. The second argument contains the continuous variable
that will be on the x-axis. The third-fifth arguments are strings that
will be used to label your axis and graph, and the final argument is a
numeric value that allows you to adjust the text size of your
labels.</p>
<p>For example, we can to view the sepal width distribution in the iris
data set:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hist_plot.html">hist_plot</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Sepal.Length</span>, <span class="st">"Sepal Length"</span>, <span class="st">"Count"</span>, <span class="st">"Sepal Length Distribution"</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ln_knn_regression-vignette_files/figure-html/example-hist-1.png" alt="Histogram for Iris Sepal Length" width="672"><p class="caption">
Histogram for Iris Sepal Length
</p>
</div>
</div>
<div class="section level4">
<h4 id="create-scatterplot-with-scatter_plot">3. Create scatterplot with <code>scatter_plot()</code><a class="anchor" aria-label="anchor" href="#create-scatterplot-with-scatter_plot"></a>
</h4>
<p><code><a href="../reference/scatter_plot.html">scatter_plot()</a></code> allows you to create a scatter plot and
checks whether or not you are using the appropriate argument types.
Scatter plots are commonly used to visualize relationships between two
continuous variables.</p>
<p>The first argument is a data frame that contains the data that you
want to visualize. The second and third argument contains the continuous
variables that will be on the x-axis and the y-axis. The fourth-sixth
arguments are strings that will be used to label your axis and graph,
and the final argument is a numeric value that allows you to adjust the
text size of your labels.</p>
<p>For example, we can to view the relationship between the sepal length
and sepal width of the flowers in the iris data set:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/scatter_plot.html">scatter_plot</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">Sepal.Length</span>, <span class="va">Sepal.Width</span>, <span class="st">"Sepal Length"</span>, <span class="st">"Sepal Width"</span>, <span class="st">"Relationship of Sepal Length and Width"</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ln_knn_regression-vignette_files/figure-html/example-scatter-1.png" alt="Scatter Plot for Iris Sepal Length vs Width" width="672"><p class="caption">
Scatter Plot for Iris Sepal Length vs Width
</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="summary-statistics">Summary Statistics<a class="anchor" aria-label="anchor" href="#summary-statistics"></a>
</h3>
<div class="section level4">
<h4 id="create-a-summary-table-with-summarize_column">1. Create a summary table with <code>summarize_column()</code><a class="anchor" aria-label="anchor" href="#create-a-summary-table-with-summarize_column"></a>
</h4>
<p><code><a href="../reference/summarize_column.html">summarize_column()</a></code> allows you to create a 1x3 data frame
that contains the summary statistics mean, median, and standard
deviation(sd). The mean and median measures the center of the
distribution, whereas the standard deviation measures the spread of the
distribution.</p>
<p>The function takes in 2 arguments. The first argument is the data
frame, the second argument is the column/variable name that you want to
find the summary statistics for. The second argument can only be a
numerical variable. If a non-numeric variable is inputted, the function
will return an error message.</p>
<p>For example, we want to find the mean, median, and sd of the petal
width in the iris dataset:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summarize_column.html">summarize_column</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">iris</span><span class="op">$</span><span class="va">Petal.Width</span><span class="op">)</span></span>
<span><span class="co">#&gt;       mean med        sd</span></span>
<span><span class="co">#&gt; 1 1.199333 1.3 0.7622377</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="regression-models">Regression Models<a class="anchor" aria-label="anchor" href="#regression-models"></a>
</h3>
<div class="section level4">
<h4 id="create-a-linear-regression-model-with-linearmodel">1. Create a linear regression model with
<code>linearmodel()</code><a class="anchor" aria-label="anchor" href="#create-a-linear-regression-model-with-linearmodel"></a>
</h4>
<p><code><a href="../reference/linearmodel.html">linearmodel()</a></code> allows you to create a linear regression
model and returns a list of the regression coefficients, including the
intercept. This model is used to describe the linear relationship
between the response variable <span class="math inline">\(y\)</span> and
the predictor variable(s) <span class="math inline">\(x_i\)</span>. It
is also used to predict the value of an unknown data from the response
variable using the known values of the predictor variable(s).</p>
<p>The function takes in 2 arguments. The first argument is the model
recipe. This is where we specify what the predictor variable(s) and
response variable are; it can be done by using the <code>recipe</code>
function found in the recipes package. The second argument is the data
set for the model. It is important that the data set specified in the
recipe is the same as the second argument.</p>
<p>For example, we want to find the relationship between the sepal width
and the sepal length in the iris dataset by creating a linear regression
model:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_recipe</span> <span class="op">&lt;-</span> <span class="fu">recipes</span><span class="fu">::</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span>, <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/linearmodel.html">linearmodel</a></span><span class="op">(</span><span class="va">iris_recipe</span>, <span class="va">iris</span><span class="op">)</span></span>
<span><span class="co">#&gt; ══ Workflow [trained] ══════════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">Preprocessor:</span> Recipe</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">Model:</span> linear_reg()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Preprocessor ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; 0 Recipe Steps</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Model ───────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; stats::lm(formula = ..y ~ ., data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt; (Intercept)  Sepal.Width  </span></span>
<span><span class="co">#&gt;      6.5262      -0.2234</span></span></code></pre></div>
<p>You can also create a linear regression model with multiple predictor
variables. For example, we want to find the relationship between the
petal width and the sepal width &amp; length in the iris data set:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_recipe_2</span> <span class="op">&lt;-</span> <span class="fu">recipes</span><span class="fu">::</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Petal.Width</span> <span class="op">~</span> <span class="va">Sepal.Width</span> <span class="op">+</span> <span class="va">Sepal.Length</span>, <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/linearmodel.html">linearmodel</a></span><span class="op">(</span><span class="va">iris_recipe_2</span>, <span class="va">iris</span><span class="op">)</span></span>
<span><span class="co">#&gt; ══ Workflow [trained] ══════════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">Preprocessor:</span> Recipe</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">Model:</span> linear_reg()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Preprocessor ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; 0 Recipe Steps</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Model ───────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; stats::lm(formula = ..y ~ ., data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;  (Intercept)   Sepal.Width  Sepal.Length  </span></span>
<span><span class="co">#&gt;      -1.5635       -0.4787        0.7233</span></span></code></pre></div>
<p>Using a linear model to predict a value is not too complicated since
it represented by the formula: <span class="math display">\[Y = b_0 +
b_1x_1 + b_2x_2 + ... + b_nx_n \]</span> where <span class="math inline">\(b_i\)</span> is the regression coefficient and
<span class="math inline">\(x_i\)</span> is the predictor variables.
Plugging in the coefficient values <span class="math inline">\(b_i\)</span> to the equation will allow you to
calculate the value of the response variable <span class="math inline">\(Y\)</span>.</p>
</div>
<div class="section level4">
<h4 id="create-a-knn-regression-model-with-knn_model">2. Create a knn regression model with <code>knn_model()</code><a class="anchor" aria-label="anchor" href="#create-a-knn-regression-model-with-knn_model"></a>
</h4>
<p><code><a href="../reference/knn_model.html">knn_model()</a></code> allows you to create a KNN regression model
and returns a list of information on the type of response variable,
minimal mean absolute error, minimal mean squared error, best kernel and
best k.</p>
<p>The function takes in 3 arguments. The first argument is the model
recipe. This is where we specify what the predictor variable(s) and
response variable are; it can be done by using the <code>recipe</code>
function found in the recipes package. The second argument is the data
set for the model. It is important that the data set specified in the
recipe is the same as the second argument. The third argument is the
response variable in the form of a string.</p>
<p>For example, we want to find the relationship between the sepal
length and the sepal width in the iris data set by creating a
KNN-regression model.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris_recipe</span> <span class="op">&lt;-</span> <span class="fu">recipes</span><span class="fu">::</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span>, <span class="va">iris</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/knn_model.html">knn_model</a></span><span class="op">(</span><span class="va">iris_recipe</span>, <span class="va">iris</span>, <span class="st">"Petal.Width"</span><span class="op">)</span></span>
<span><span class="co">#&gt; ══ Workflow [trained] ══════════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">Preprocessor:</span> Recipe</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">Model:</span> nearest_neighbor()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Preprocessor ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; 0 Recipe Steps</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Model ───────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; kknn::train.kknn(formula = ..y ~ ., data = data, ks = min_rows(23L,     data, 5), kernel = ~"rectangular")</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Type of response variable: continuous</span></span>
<span><span class="co">#&gt; minimal mean absolute error: 0.6225797</span></span>
<span><span class="co">#&gt; Minimal mean squared error: 0.6238154</span></span>
<span><span class="co">#&gt; Best kernel: rectangular</span></span>
<span><span class="co">#&gt; Best k: 23</span></span></code></pre></div>
<p>Not like the linear regression model, you can’t easily predict a
value using the output of the <code><a href="../reference/knn_model.html">knn_model()</a></code> function since
there is no simple mathematical equation for this model. Instead,
predictions can only be done using the KNN algorithm.</p>
</div>
<div class="section level4">
<h4 id="calculate-the-rmspe-value-of-the-model-with-model_rmspe">3. Calculate the RMSPE value of the model with
<code>model_rmspe()</code><a class="anchor" aria-label="anchor" href="#calculate-the-rmspe-value-of-the-model-with-model_rmspe"></a>
</h4>
<p><code><a href="../reference/model_rmspe.html">model_rmspe()</a></code> allows you to calculate the RMSPE (root
mean square prediction error) value of a model. Now that we are able to
build regression models, we need to check which of these models is the
best one. For regression models, rmspe is a metric that evaluates the
quality of your model; the better model will have a lower RMSPE
value.</p>
<p>The function takes in 3 arguments. The first argument is the
linear/regression model. This can be done using either the
<code>linearmodel</code> function or the<code>knn_model</code> function
that is also included in this package. The second argument is the
testing data set for the model. It is important that the testing data
set is different from the (training) data set that was used to build the
model. However, the training and testing data sets need to contain the
same variables. The third argument is the response variable in the form
of a string.</p>
<p>For example, we want to find the RMSPE value of KNN-regression model
and the linear regression model that has sepal length as a response
variable, and sepal width as a predictor variable.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span></span>
<span><span class="va">split_iris</span> <span class="op">&lt;-</span> <span class="fu">rsample</span><span class="fu">::</span><span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html" class="external-link">initial_split</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span>
<span><span class="va">iris_train</span> <span class="op">&lt;-</span> <span class="fu">rsample</span><span class="fu">::</span><span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html" class="external-link">training</a></span><span class="op">(</span><span class="va">split_iris</span><span class="op">)</span></span>
<span><span class="va">iris_test</span> <span class="op">&lt;-</span> <span class="fu">rsample</span><span class="fu">::</span><span class="fu"><a href="https://rsample.tidymodels.org/reference/initial_split.html" class="external-link">testing</a></span><span class="op">(</span><span class="va">split_iris</span><span class="op">)</span></span>
<span><span class="va">iris_recipe</span> <span class="op">&lt;-</span> <span class="fu">recipes</span><span class="fu">::</span><span class="fu"><a href="https://recipes.tidymodels.org/reference/recipe.html" class="external-link">recipe</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">~</span> <span class="va">Sepal.Width</span>, <span class="va">iris_train</span><span class="op">)</span></span>
<span><span class="va">lm_iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/linearmodel.html">linearmodel</a></span><span class="op">(</span><span class="va">iris_recipe</span>, <span class="va">iris_train</span><span class="op">)</span></span>
<span><span class="va">knn_iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/knn_model.html">knn_model</a></span><span class="op">(</span><span class="va">iris_recipe</span>, <span class="va">iris_train</span>, <span class="st">"Sepal.Length"</span><span class="op">)</span></span>
<span><span class="va">lm_rmspe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_rmspe.html">model_rmspe</a></span><span class="op">(</span><span class="va">lm_iris</span>, <span class="va">iris_test</span>, <span class="st">"Sepal.Length"</span><span class="op">)</span></span>
<span><span class="va">knn_rmspe</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/model_rmspe.html">model_rmspe</a></span><span class="op">(</span><span class="va">knn_iris</span>, <span class="va">iris_test</span>, <span class="st">"Sepal.Length"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"The RMSPE of the linear model is: "</span>, <span class="va">lm_rmspe</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "The RMSPE of the linear model is: 0.831695819863976"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"The RMSPE of the KNN model is: "</span>, <span class="va">knn_rmspe</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "The RMSPE of the KNN model is: 0.812176406751112"</span></span></code></pre></div>
<p>From the output above, we see that the the RSMPE of the linear model
is 0.83, while the RMSPE of the KNN model is 0.81. This implies that the
KNN model is a better regression model since it has a lower prediction
error.</p>
</div>
<div class="section level4">
<h4 id="create-visual-representations-of-the-models-with-scatter_plot">4. Create visual representations of the models with
<code>scatter_plot()</code><a class="anchor" aria-label="anchor" href="#create-visual-representations-of-the-models-with-scatter_plot"></a>
</h4>
<p>Lastly, we can visualize the predictive models with the original data
using <code><a href="../reference/scatter_plot.html">scatter_plot()</a></code>.</p>
<p>For the linear regression model, we can show the model’s best fit
line:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/scatter_plot.html">scatter_plot</a></span><span class="op">(</span><span class="va">iris_train</span>, <span class="va">Sepal.Width</span>, <span class="va">Sepal.Length</span>, <span class="st">"Sepal Width"</span>, <span class="st">"Sepal Length"</span>, <span class="st">"Linear Regression Model for Sepal Length"</span>, <span class="fl">10</span>, <span class="st">"lm"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ln_knn_regression-vignette_files/figure-html/lm_scatter-1.png" alt="Linear Model for Iris Sepal Length" width="672"><p class="caption">
Linear Model for Iris Sepal Length
</p>
</div>
<p>And for the k-nn regression model, we can show the model’s best fit
curve:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">knn_prediction</span> <span class="op">&lt;-</span> <span class="va">knn_iris</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">iris_train</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">iris_train</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/scatter_plot.html">scatter_plot</a></span><span class="op">(</span><span class="va">knn_prediction</span>, <span class="va">Sepal.Width</span>, <span class="va">Sepal.Length</span>, <span class="st">"Sepal Width"</span>, <span class="st">"Sepal Length"</span>, <span class="st">"Linear Regression Model for Sepal Length"</span>, <span class="fl">10</span>, <span class="st">"knn"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ln_knn_regression-vignette_files/figure-html/knn_scatter-1.png" alt="K-NN Model for Iris Sepal Length" width="672"><p class="caption">
K-NN Model for Iris Sepal Length
</p>
</div>
<p>These two plots show the difference between the linear and KNN
regression models.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>With <code>ln.knn.regression</code>, you can build linear and KNN
<strong>regression</strong> models with any quantitative variables and
any number of predictors. Refer to <a href="https://www.tidymodels.org/" class="external-link">tidymodels</a> for more information
on other analysis models.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Moira Renata.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
